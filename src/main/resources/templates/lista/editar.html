<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Editar Personas</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
  </head>
  <body>
    <!-- Incluir la barra de navegación -->
    <div th:replace="~{layout/navbar :: navbar}"></div>
    <form
      th:action="@{/api/listas/actualizar/{id}(id=${lista.id})}"
      th:object="${lista}"
      method="post"
    >
      <input
        type="text"
        th:field="*{nombre}"
        placeholder="Nombre de la lista"
        required
      />

      <div class="mb-3">
        <label for="canciones" class="form-label">Cambiar Canción</label>
        <select
          th:field="*{canciones}"
          id="canciones"
          class="form-control"
          multiple
        >
          <option
            th:each="c : ${canciones}"
            th:value="${c.id}"
            th:text="${c.titulo}"
          ></option>
        </select>
      </div>

      <input type="hidden" id="lista_id" name="lista_id" />

      <button type="submit">Actualizar Lista</button>
    </form>
  </body>
</html>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Obtener el select y el campo oculto
    const selectLista = document.getElementById("lista");
    const idListaField = document.getElementById("lista_id");

    // Cuando cambie la selección, asignar el valor al campo oculto
    selectLista.addEventListener("change", function () {
      // Asignar el primer valor seleccionado (ya que se permite seleccionar solo uno)
      idListaField.value = selectLista.value;
    });
  });
</script>
