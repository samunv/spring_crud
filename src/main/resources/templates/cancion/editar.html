<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Editar Canción</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
  </head>
  <body>
    <!-- Incluir la barra de navegación -->
    <div th:replace="~{layout/navbar :: navbar}"></div>

    <div class="container mt-4">
      <h1 class="mb-4">Editar Canción</h1>

      <form
        th:action="@{/api/canciones/actualizar/{id}(id=${cancion.id})}"
        method="post"
      >
        <input type="hidden" th:field="*{cancion.id}" />

        <div class="mb-3">
          <label for="titulo" class="form-label">Título</label>
          <input
            type="text"
            id="titulo"
            name="titulo"
            class="form-control"
            th:field="*{cancion.titulo}"
            required
          />
        </div>

        <div class="mb-3">
          <label for="genero" class="form-label">Género</label>
          <input
            type="text"
            id="genero"
            name="genero"
            class="form-control"
            th:field="*{cancion.genero}"
            required
          />
        </div>

        <div class="mb-3">
			<label for="artista" class="form-label">Seleccionar Artista</label>
			<select id="artista" name="artista_id" class="form-control" required>
            <option
              th:each="a : ${artistas}"
              th:value="${a.id}"
              th:text="${a.nombre}"
            ></option>
          </select>
        </div>

        <input type="hidden" id="artista_id" name="artista_id" />

        <button type="submit" class="btn btn-primary">
          Actualizar canción
        </button>
        <a th:href="@{/api/canciones/listar}" class="btn btn-secondary"
          >Cancelar</a
        >
      </form>
    </div>
  </body>
</html>
<script>
//   document.addEventListener("DOMContentLoaded", function () {
//     // Seleccionar el select y el campo oculto
//     const selectLista = document.getElementById("lista");
//     const idListaField = document.getElementById("lista_id");

//     selectLista.addEventListener("change", function () {
//       let valoresSeleccionados = [];

//       // Recorrer todas las opciones del select
//       for (let opcion of selectLista.options) {
//         // Si una opción está seleccionada, la añadimos a la lista
//         if (opcion.selected) {
//           valoresSeleccionados.push(opcion.value);
//         }
//       }

//       // Guardar los valores seleccionados en el campo oculto separados por comas
//       idListaField.value = valoresSeleccionados.join(",");
//     });
//   });
</script>
